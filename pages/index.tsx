import Head from "next/head";
import { useEffect } from "react";
import { useAuth } from "../context/auth-context";
import { Button, Flex, Container } from "@chakra-ui/react";

export default function Home() {
  useEffect(() => {
    // to suppress the warning
    window.onSpotifyWebPlaybackSDKReady = () => {};
  }, []);

  const { accessToken } = useAuth();

  return (
    <>
      <Head>
        <title>Authentication | zer0eXploitify</title>
        <meta
          name="description"
          content="zer0eXploit's custom spotify player"
        />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Container height="100vh">
          <Flex justify="center" align="center" height="100%">
            <Button
              colorScheme="gray"
              onClick={() => {
                if (accessToken) {
                  window.open("/player", "_self");
                } else {
                  window.open("/api/v1/auth/spotify", "_self");
                }
              }}
            >
              Let&apos;s Go!
            </Button>
          </Flex>
        </Container>
      </main>
    </>
  );
}
